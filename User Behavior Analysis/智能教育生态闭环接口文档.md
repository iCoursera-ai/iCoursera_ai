# 智能教育生态闭环接口文档

## 文档概述

### 基础信息

- 服务基础地址：`http://localhost:5000`

- 请求方式：GET（所有接口均为GET请求）

- 字符编码：UTF-8

- 统一返回格式：

    ```JSON
    
    ```

### 状态码说明

|状态码|说明|
|---|---|
|200|请求成功|
|400|参数错误（缺失/格式错误）|
|500|服务器内部错误|
## 接口列表

### 1. 课程推荐接口

#### 接口描述

根据用户ID生成个性化课程推荐列表，支持指定返回结果数量，综合用户行为、课程相似度、领域偏好等维度计算推荐评分。

#### 请求信息

- 请求方法：GET

- 请求路径：`/api/recommend`

- 请求参数：

|参数名|类型|是否必填|说明|
|---|---|---|---|
|user_id|string|是|用户唯一标识（如：U001）|
|top_n|int|否|返回推荐课程数量（默认返回全部）|
#### 返回示例

##### 成功响应（200）

```JSON

```

##### 失败响应（400）

```JSON

```

### 2. 自适应学习提示接口

#### 接口描述

根据用户ID和课程ID，计算用户对该课程关联知识点的平均掌握度，返回个性化学习提示（掌握度低于阈值时触发）。

#### 请求信息

- 请求方法：GET

- 请求路径：`/api/adaptive-hint`

- 请求参数：

|参数名|类型|是否必填|说明|
|---|---|---|---|
|user_id|string|是|用户唯一标识（如：U001）|
|course_id|string|是|课程唯一标识（如：C002）|
|threshold|float|否|掌握度阈值（默认0.6，范围0-1）|
#### 返回示例

##### 成功响应（200，掌握度低于阈值）

```JSON

```

##### 成功响应（200，课程不存在）

```JSON

```

##### 失败响应（400）

```JSON

```

### 3. 视频行为统计接口

#### 接口描述

获取指定课程+章节的视频行为精细化统计数据，包括播放/暂停/快进/慢放等行为类型占比、时间轴分布、参与用户数。

#### 请求信息

- 请求方法：GET

- 请求路径：`/api/teaching-optim/video-stats`

- 请求参数：

|参数名|类型|是否必填|说明|
|---|---|---|---|
|course_id|string|是|课程唯一标识（如：C002）|
|chapter_id|string|是|章节唯一标识（如：CH001）|
#### 返回示例

##### 成功响应（200）

```JSON

```

##### 失败响应（400）

```JSON

```

### 4. 视频行为可视化接口

#### 接口描述

生成指定课程+章节的视频行为可视化图表（饼图+堆叠柱状图），返回Base64编码字符串，可直接嵌入前端`<img>`标签展示。

#### 请求信息

- 请求方法：GET

- 请求路径：`/api/teaching-optim/video-visual`

- 请求参数：

|参数名|类型|是否必填|说明|
|---|---|---|---|
|course_id|string|是|课程唯一标识（如：C002）|
|chapter_id|string|是|章节唯一标识（如：CH001）|
#### 返回示例

##### 成功响应（200）

```JSON

```

##### 失败响应（500）

```JSON

```

## 补充说明

1. **Base64图表展示**：视频行为可视化接口返回的`img_base64`可通过以下方式在前端展示：

    ```HTML
    
    ```

2. **数据依赖**：

    - 推荐接口依赖`user_behaviors`表的用户行为数据；

    - 自适应提示接口依赖`course_knowledge`（课程-知识点）和`user_knowledge_mastery`（用户知识点掌握度）表；

    - 视频行为接口依赖`user_behaviors`表的`chapter_id`字段和视频行为类型数据（video_play/pause/forward/slow/finish）。
> （注：文档部分内容可能由 AI 生成）